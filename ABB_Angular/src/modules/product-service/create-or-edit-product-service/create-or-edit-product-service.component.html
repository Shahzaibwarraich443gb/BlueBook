<div [@routerTransition] class="model-input-size">
  <mat-dialog-content>

    <div class="popup-body">
      <div class="cashier-popup-inner">
        <div class="cashier-popup-header relative mb-11">
          <div class="cashier-popup-header-title">
            <h4 class="text-[20px] text-heading font-bold" mat-dialog-title cdkDrag
              cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
              {{ data.id ? "Edit Products/Services" : "Add Products/Services" }}
            </h4>
          </div>
          <div class="cashier-popup-header-close absolute -top-4 right-0">
            <mat-dialog-actions>
              <div class="default-light-theme">
                <a href="javascript:void(0)" mat-dialog-close>
                  <mat-icon>clear</mat-icon>
                </a>
              </div>
            </mat-dialog-actions>
          </div>
        </div>
        <form autocomplete="off" #createOrEditSourecReferalForm="ngForm" (ngSubmit)="save()"
          style="position: static;">
          <div class="grid grid-cols-3 gap-x-8 ">

            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                Type <span class="requiredMark">*</span>
              </h5>

              <mat-select [(value)]="createOrEditProductServiceInputDto.typeId" required [placeholder]="'Select Type'"
                style=" border-bottom: 1px solid; margin-top: 0.3rem;">
                <mat-option [value]="1">Product</mat-option>
                <mat-option [value]="2">Service</mat-option>

              </mat-select>

            </div>

            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ">
                Name <span class="requiredMark">*</span>
              </h5>
              <div class=" " style="display: flex">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden"></mat-label>
                  <input [(ngModel)]="createOrEditProductServiceInputDto.name" type="text" matInput name="name"
                    id="name" maxlength="100" #nameEl required />
                </mat-form-field>
              </div>
            </div>
            <div>
              <div class="cashier-select-field  ">
                <div>
                  <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                    Category <span class="requiredMark">*</span>
                  </h5>

                  <div class="flex">
                    <mat-select [(ngModel)]="createOrEditProductServiceInputDto.productCategoryId" name="category" required
                      [placeholder]="'Select  Category'" style=" border-bottom: 1px solid; margin-top: 0.3rem;" #productCategory="ngModel"
                      [ngClass]="{'error-border': productCategory.invalid && productCategory.touched}">
                      <mat-option *ngFor="let  item of productCategoryDto" [value]="item.id">{{ item.name
                        }}</mat-option>

                    </mat-select>

                    <button class="selectAddBtnPR mt-auto" style="transform: translateY(0px) !important" type="button"
                      mat-raised-button color="primary" (click)="createProductCategory()">
                      Add
                    </button>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div class="grid grid-cols-3 gap-x-8">


            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ">
                Sale Price <span class="requiredMark">*</span>
                <!-- <span (click)="CostOrSalePriceHistory('SalePrice')" class="salePriceMargin"><i class="fa fa-bars"
                    aria-hidden="true"></i> Sale Price History </span> -->
              </h5>

              <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                <mat-label class="hidden"></mat-label>
                <input type="number" [(ngModel)]="createOrEditProductServiceInputDto.salePrice"
                  (ngModelChange)="checkRequired('income')" type="text" matInput name="salePrice" id="salePrice"
                  maxlength="20" #salePriceEl required />
              </mat-form-field>
            </div>

            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                Income Account <span class="requiredMark" *ngIf="salePriceActive">*</span>
              </h5> 

              <mat-select [(ngModel)]="createOrEditProductServiceInputDto.incomeAccountId" name="incomeAccountId"
                [placeholder]="'Select  Account'"
                style=" border-bottom: 1px solid; margin-top: 0.3rem;"
                [required]="false">
                <mat-option *ngFor="let  item of chartOfAccountIncomeDto" [value]="item.id">{{
                  item.accountDescription }}</mat-option>

              </mat-select>

            </div>


            <div class="grid grid-cols-2 gap-x-8">

              <div class="cashier-select-field  ">
                <h5 class="text-[15px] text-heading font-semibold ">
                  Sale Tax %
                </h5>
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden"></mat-label>
                  <input [(ngModel)]="createOrEditProductServiceInputDto.saleTax" (ngModelChange)="checkRequired('advancedSaleTax')" type="text" matInput name="saleTax"
                    id="saleTax" #saleTaxEl appDecimalLimit/>
                </mat-form-field>
              </div>

              <div class="cashier-select-field  ">
                <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                  Advance Sales Tax Account <span class="requiredMark" *ngIf="advanceSaleTaxActive">*</span>
                </h5>

                <mat-select [(ngModel)]="createOrEditProductServiceInputDto.advanceSaleTaxAccountId" name="advancedSaleTaxId"
                  [placeholder]="'Select  Account'"
                  #advanceSaleTaxAccountSelect="ngModel" 
                  [ngClass]="{'error-border': advanceSaleTaxAccountSelect.invalid }" style=" border-bottom: 1px solid; margin-top: 0.3rem;"
                  [required]="advanceSaleTaxActive">
                  <mat-option *ngFor="let  item of advanceSaleTaxAccountArr" [value]="item.id">{{item.accountDescription}}</mat-option>

                </mat-select>

              </div>

            </div>
          </div>



          <div class="grid grid-cols-3 gap-x-8">

            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ">
                Cost Price
                <!-- <span (click)="CostOrSalePriceHistory('CostPrice')" class="salePriceMargin"><i
                      class="fa fa-bars" aria-hidden="true"></i> Cost Price History </span> -->
              </h5>
              <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                <mat-label class="hidden"></mat-label>
                <input type="number" [(ngModel)]="createOrEditProductServiceInputDto.costPrice"
                  (ngModelChange)="checkRequired('expense')" type="text" matInput name="costPrice" id="costPrice"
                  maxlength="20" #costPriceEl />
              </mat-form-field>
            </div>


            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                Expense Account <span class="requiredMark" *ngIf="costPriceActive">*</span>
              </h5>

              <mat-select [(ngModel)]="createOrEditProductServiceInputDto.expenseAccountId" name="expenseAccountId"
                [placeholder]="'Select Account'" (focus)="checkRequired('expense')" style=" border-bottom: 1px solid; margin-top: 0.3rem;"
                #expenseAccountSelect="ngModel" [ngClass]="{'error-border': expenseAccountSelect.invalid}"
                [required]="costPriceActive">
                <mat-option *ngFor="let  item of chartOfAccountExpenseDto" [value]="item.id">{{
                  item.accountDescription }}</mat-option>

              </mat-select>

            </div>


            <div class="grid grid-cols-2 gap-x-8">

              <div class="cashier-select-field  ">
                <h5 class="text-[15px] text-heading font-semibold ">
                  Sale Tax %
                </h5>
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden"></mat-label>
                  <input [(ngModel)]="createOrEditProductServiceInputDto.expenseSaleTax" (ngModelChange)="checkRequired('liability')" type="text" matInput name="saleTaxLiability"
                    id="saleTax"  #saleTaxEl  appDecimalLimit/>
                </mat-form-field>
              </div>

              <div class="cashier-select-field  ">
                <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                  Liability Account <span class="requiredMark" *ngIf="liabilityActive">*</span>
                </h5>

                <mat-select [(ngModel)]="createOrEditProductServiceInputDto.liabilityAccountId" name="liabilityAccountId"
                  [placeholder]="'Select  Account'" #liabilityAccountSelect="ngModel" 
                  [ngClass]="{'error-border': liabilityAccountSelect.invalid }" style=" border-bottom: 1px solid; margin-top: 0.3rem;"
                  [required]="liabilityActive">
                  <mat-option *ngFor="let  item of liabilityAccountArr" [value]="item.id">{{
                    item.accountDescription }}</mat-option>

                </mat-select>

              </div>

            </div>

          </div>


          <div class="grid grid-cols-3 gap-x-8">

            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ng-tns-c162-8 ">
                Vendor <span class="requiredMark" *ngIf="expenseEntryActive">*</span>
              </h5>
              <div class="flex">
                <mat-select [(ngModel)]="createOrEditProductServiceInputDto.vendorId" [required]="expenseEntryActive"
                  [placeholder]="'Select Vendor'" name="vendor" style=" border-bottom: 1px solid; margin-top: 0.3rem;"
                  #vendorSelect="ngModel" [ngClass]="{'error-border': vendorSelect.invalid }">
                  <mat-option *ngFor="let  item of venderDto" [value]="item.id">{{ item.vendorName }}</mat-option>
                </mat-select>

                <button class="selectAddBtnPR mt-auto" style="transform: translateY(0px) !important" type="button"
                  mat-raised-button color="primary" (click)="addVendor()">
                  Add
                </button>
              </div>

            </div>


            <div class="cashier-select-field  ">
              <h5 class="text-[15px] text-heading font-semibold ">
                SKU
              </h5>
              <div class=" " style="display: flex">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden"></mat-label>
                  <input [(ngModel)]="createOrEditProductServiceInputDto.sku" type="text" matInput name="sku" id="sku"
                    maxlength="50" #skuEl />
                </mat-form-field>
              </div>
            </div>

            <div class="cashier-select-field" style="margin-top: auto;margin-bottom: 2rem !important;">
              <div class="">
                <div class="custom-control custom-checkbox flex items-center" style="width: 15rem;">
                  <input type="checkbox" class="custom-control-input"
                    [(ngModel)]="createOrEditProductServiceInputDto.automaticExpense"
                    (ngModelChange)="onExpenseEntryChange()" name="automaticExpense" id="automaticExpense" />
                  <div class="text-[15px] text-heading font-semibold ml-2"> Automatic Expense Entry </div>
                  <div [matTooltip]="expenseEntryHelpText" [matTooltipPosition]="'above'" matTooltipClass="ps-tooltip"
                    class="bg-amber-100 rounded-md p-1 w-5 h-5 text-xs flex justify-center items-center font-bold border border-gray-500 ml-2 cursor-pointer">
                    ?</div>
                </div>
              </div>
            </div>



            <div class="lg:col-span-2 marginRadioButtons md:col-span-2 sm:col-span-12"
              *ngIf="createOrEditProductServiceInputDto.id >0 ? true:false">
              <div class="cashier-select-field mb-3">
                <div class="">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input"
                      [(ngModel)]="createOrEditProductServiceInputDto.isActive" name="isActive" id="isActive" />
                    <span style="margin-left: 11px " class="text-[15px] text-heading font-semibold"> Active </span>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <div class="grid grid-cols-12 gap-x-8 maxSm:gap-x-0  ">
            <div class="lg:col-span-12 md:col-span-3 sm:col-span-12">
              <div class="cashier-select-field ">
                <h5 class="text-[15px] text-heading font-semibold ">Sale Information </h5>
                <div class="">
                  <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                    <mat-label class="hidden"></mat-label>
                    <textarea [(ngModel)]="createOrEditProductServiceInputDto.saleInformation" style="height: 13px;"
                      matInput name="saleInformation" id="saleInformation" maxlength="2000"></textarea>
                  </mat-form-field>
                </div>
              </div>
            </div>

          </div>

          <div class="grid grid-cols-12 gap-x-8 maxSm:gap-x-0 ">

            <div class="md:col-span-2 sm:col-span-12">
              <div class="cashier-popup-btn default-light-theme pt-1.5">
                <button type="button" mat-raised-button color="accent" (click)="hideDialog()">
                  Cancel
                </button>
              </div>
            </div>
            <div class="md:col-span-2 sm:col-span-12">
              <div class="cashier-popup-btn default-light-theme pt-1.5">
                <button type="submit" mat-raised-button color="primary" class="productServiceSubmitBtn"
                  [disabled]="!createOrEditSourecReferalForm.form.valid">
                  Submit
                </button>
              </div>
            </div>
          </div>

        </form>
      </div>
    </div>
  </mat-dialog-content>
</div>
<!-- <mat-dialog-content>
  <div class="popup-body">
    <div class="cashier-popup-inner">
      <div class="cashier-popup-header relative mb-11">
        <div class="cashier-popup-header-title">
          <h4 class="text-[20px] text-heading font-bold"> {{ data.id ? "Edit User": "Add User" }}</h4>
        </div>
        <div class="cashier-popup-header-close absolute -top-4 right-0">
          <mat-dialog-actions>
            <div class="default-light-theme">
              <a href="javascript:void(0)" mat-dialog-close>
                <mat-icon>clear</mat-icon>
              </a>
            </div>
          </mat-dialog-actions>
        </div>
      </div>
      <form autocomplete="off" #createOrEditUserForm="ngForm" (ngSubmit)="save()">
        <div class="grid grid-cols-12 gap-x-7 maxSm:gap-x-0">
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3">Name</h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Customer name</mat-label>
                  <input type="text" matInput name="name" id="name" required maxlength="32" [(ngModel)]="user.name"
                    #nameModel="ngModel" #nameEl placeholder="Jhon" />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3">Surname</h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Surname</mat-label>
                  <input type="text" matInput name="surname" id="surname" required maxlength="32"
                    [(ngModel)]="user.surname" #surnameModel="ngModel" #surnameEl placeholder="Doe" />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3">Email</h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Customer name</mat-label>
                  <input type="email" matInput name="emailAddress" id="emailAddress" required maxlength="256"
                    pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{1,})+$" [(ngModel)]="user.emailAddress"
                    #emailAddressModel="ngModel" #emailAddressEl [placeholder]="'info@example.com'" />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3">Password</h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Password</mat-label>
                  <input matInput [type]="hide ? 'password' : 'text'" name="password" id="password" required
                    maxlength="32" validateEqual="confirmPassword" reverse="true"
                    pattern="(?=^.{8,}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s)[0-9a-zA-Z!@#$%^&*()]*$"
                    (keyup)="match(user.password, confirmPassword)" [(ngModel)]="user.password" #passwordModel="ngModel"
                    #passwordEl />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3">Confirm Password</h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Customer name</mat-label>
                  <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" name="confirmPassword"
                    id="confirmPassword" required (keyup)="match(user.password, confirmPassword)" maxlength="32"
                    validateEqual="password" reverse="false" ngModel #confirmPasswordModel="ngModel"
                    #confirmPasswordEl />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="md:col-span-12">
            <div class="cashier-select-field mb-6">
              <h5 class="text-[15px] text-heading font-semibold mb-3"></h5>
              <div class="cashier-input-field-style">
                <mat-form-field [hideRequiredMarker]="true" class="w-full" [floatLabel]="'always'">
                  <mat-label class="hidden">Customer name</mat-label>
                  <mat-checkbox class="example-margin">Is Active</mat-checkbox>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-popup-btn default-light-theme pt-1.5">
              <button type="button" mat-raised-button color="accent" (click)="hideDialog()">Cancel</button>
            </div>
          </div>
          <div class="md:col-span-6 sm:col-span-12">
            <div class="cashier-popup-btn default-light-theme pt-1.5">
              <button type="submit" mat-raised-button color="primary">Submit</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</mat-dialog-content>  -->